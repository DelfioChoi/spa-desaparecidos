import{j as e,L as p,r as n}from"./index-r28vV2A_.js";import{b as f,f as b}from"./api-BztLRbaK.js";function N({value:s,onChange:l,onSubmit:t}){return e.jsxs("form",{onSubmit:a=>{a.preventDefault(),t==null||t()},className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"search",placeholder:"Buscar por nome, cidade, observação...",value:s,onChange:a=>l(a.target.value),className:"flex-1 p-2 border rounded"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Buscar"})]})}function v({person:s}){const l=s.urlFoto?`${f}${s.urlFoto}`:"/placeholder.png",t=a=>{a.currentTarget.src="/placeholder.png"};return e.jsxs("article",{className:"bg-white rounded shadow p-4 flex gap-4",children:[e.jsx("img",{src:l,alt:s.nome,className:"w-24 h-24 object-cover rounded",onError:t}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold",children:s.nome}),e.jsxs("p",{className:"text-sm",children:[s.idade?`${s.idade} anos`:""," ",s.sexo||""]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="DESAPARECIDA"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:s.status})})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(p,{to:`/pessoas/${s.id}`,className:"text-blue-600",children:"Ver detalhes"})})]})}function E({page:s,total:l,pageSize:t,onPageChange:a}){const c=Math.ceil(l/t);return e.jsxs("div",{className:"flex gap-2 items-center justify-center mt-4",children:[e.jsx("button",{disabled:s<=1,onClick:()=>a(s-1),className:"px-3 py-1 border rounded",children:"Anterior"}),e.jsxs("span",{children:["Página ",s," de ",c]}),e.jsx("button",{disabled:s>=c,onClick:()=>a(s+1),className:"px-3 py-1 border rounded",children:"Próxima"})]})}function S(){const[s,l]=n.useState(""),[t,a]=n.useState(1),[c,m]=n.useState([]),[h,g]=n.useState(0),o=10,[j,d]=n.useState(!1),[i,x]=n.useState(null),u=async()=>{d(!0),x(null);try{const r=await b(t,o,s);m(r.content||[]),g(r.totalElements||0)}catch(r){x(r.message||"Erro ao carregar dados")}finally{d(!1)}};return n.useEffect(()=>{u()},[t]),e.jsxs("div",{children:[e.jsx(N,{value:s,onChange:l,onSubmit:()=>{a(1),u()}}),j&&e.jsx("div",{children:"Carregando registros..."}),i&&e.jsx("div",{className:"text-red-600",children:i}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(r=>e.jsx(v,{person:r},r.id))}),e.jsx(E,{page:t,total:h,pageSize:o,onPageChange:r=>a(r)})]})}export{S as default};
